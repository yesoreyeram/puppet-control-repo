---
  # General Settings
  profiles::gstack::general_setting::enhancer_packages : ['wget','sudo','openssh-server','curl','nano','git','unzip','lvm2','telnet','nc','net-tools']
  profiles::gstack::general_setting::enhancer_packages_redhat : ['epel-release', 'libffi-devel', 'openssl-devel']
  profiles::gstack::general_setting::enhancer_packages_debian : ['apt-utils','apt-transport-https','apache2-utils','build-essential', 'libssl-dev', 'libffi-dev','jq']
  profiles::gstack::general_settings::username : "_monitoring"
  # Supervisor Settings
  profiles::gstack::supervisor::user : "superuser"
  profiles::gstack::supervisor::pass : "superpass"
  # MySQL Settings
  profiles::gstack::mysql::root_username : "root"
  profiles::gstack::mysql::root_password : "mysqlStrongPasswords"
  # Graphite Settings
  profiles::gstack::graphite::allinone::graphite::carbon_conf_settings :
    'cache:a':
      USER : "%{lookup('profiles::gstack::general_settings::username')}"
      DATABASE : whisper
      LOCAL_DATA_DIR : /opt/data/graphite/storage/whisper/
      ENABLE_LOGROTATION : True
      MAX_CACHE_SIZE : inf
      MAX_UPDATES_PER_SECOND : 500
      MAX_CREATES_PER_MINUTE : 50
      MIN_TIMESTAMP_RESOLUTION : 1
      LINE_RECEIVER_INTERFACE : 0.0.0.0
      LINE_RECEIVER_PORT : 0
      ENABLE_UDP_LISTENER : False
      UDP_RECEIVER_INTERFACE : 0.0.0.0
      UDP_RECEIVER_PORT : 0
      PICKLE_RECEIVER_INTERFACE : 127.0.0.1
      PICKLE_RECEIVER_PORT : 2204
      USE_INSECURE_UNPICKLER : False
      CACHE_QUERY_INTERFACE : 0.0.0.0
      CACHE_QUERY_PORT : 7201
      USE_FLOW_CONTROL : True
      LOG_UPDATES : False
      LOG_CREATES : False
      LOG_CACHE_HITS : False
      LOG_CACHE_QUEUE_SORTS : False
      CACHE_WRITE_STRATEGY : sorted
      WHISPER_AUTOFLUSH : False
      WHISPER_FALLOCATE_CREATE : True
      GRAPHITE_URL : http://127.0.0.1:8888
      ENABLE_TAGS : False
      TAG_UPDATE_INTERVAL : 100
      TAG_HASH_FILENAMES : True
      TAG_BATCH_SIZE : 100
      TAG_QUEUE_SIZE : 10000
    'cache:b':
      USER : "%{lookup('profiles::gstack::general_settings::username')}"
      DATABASE : whisper
      LOCAL_DATA_DIR : /opt/data/graphite/storage/whisper/
      LINE_RECEIVER_PORT : 0
      PICKLE_RECEIVER_INTERFACE : 127.0.0.1
      PICKLE_RECEIVER_PORT : 2214
      CACHE_QUERY_INTERFACE : 0.0.0.0
      CACHE_QUERY_PORT : 7202
      LOG_UPDATES : False
      LOG_CREATES : False
      LOG_CACHE_HITS : False
      LOG_CACHE_QUEUE_SORTS : False
      GRAPHITE_URL : http://127.0.0.1:8888
      ENABLE_TAGS : False
      TAG_UPDATE_INTERVAL : 100
      TAG_HASH_FILENAMES : True
      TAG_BATCH_SIZE : 100
      TAG_QUEUE_SIZE : 10000
    relay:
      LINE_RECEIVER_INTERFACE : 0.0.0.0
      LINE_RECEIVER_PORT : 2103
      PICKLE_RECEIVER_INTERFACE : 0.0.0.0
      PICKLE_RECEIVER_PORT : 2104
      RELAY_METHOD : rules
      REPLICATION_FACTOR : 2
      DESTINATIONS : 127.0.0.1:2204:a, 127.0.0.1:2214:b
      MAX_QUEUE_SIZE : 2000000
      MAX_DATAPOINTS_PER_MESSAGE : 500
      QUEUE_LOW_WATERMARK_PCT : 0.8
      TIME_TO_DEFER_SENDING : 0.0001
      USE_FLOW_CONTROL : True
      USE_RATIO_RESET : False
      MIN_RESET_STAT_FLOW : 1000
      MIN_RESET_RATIO : 0.9
      MIN_RESET_INTERVAL : 121
    aggregator:
      LINE_RECEIVER_INTERFACE : 0.0.0.0
      LINE_RECEIVER_PORT : 2103
      PICKLE_RECEIVER_INTERFACE : 0.0.0.0
      PICKLE_RECEIVER_PORT : 2104
      FORWARD_ALL : True
      DESTINATIONS : 127.0.0.1:2004
      REPLICATION_FACTOR : 1
      MAX_QUEUE_SIZE : 10000
      USE_FLOW_CONTROL : True
      MAX_DATAPOINTS_PER_MESSAGE : 500
      MAX_AGGREGATION_INTERVALS : 5
  profiles::gstack::graphite::allinone::graphite::storage_aggregation:
    min:
      pattern : '\.min$'
      xFilesFactor : 0.1
      aggregationMethod : min
    max:
      pattern : '\.max$'
      xFilesFactor : 0.1
      aggregationMethod : max
    sum:
      pattern : '\.count$'
      xFilesFactor : 0
      aggregationMethod : sum
    default_average:
      pattern : '.*'
      xFilesFactor : 0.5
      aggregationMethod : average
  profiles::gstack::graphite::allinone::graphite::storage_schemas:
    carbon :
      pattern : '^carbon\.'
      retentions : '60:90d'
    prod_default :
      pattern : '^prod\.'
      retentions : '60:90d'
    backoffice_default :
      pattern : '^BO\.'
      retentions : '300:90d'
    tags :
      pattern : '^tags\.'
      retentions : '1:1'
  profiles::gstack::graphite::allinone::graphite::relay_rules:
    default:
      default: 'True'
      destinations : '127.0.0.1:2204:a, 127.0.0.1:2214:b'
  profiles::gstack::graphite::allinone::graphite::whitelist_conf_settings :
    - "^BO.*"
    - "^DYNS.*"
    - "^HEALTHCHECK.*"
    - "^HEARTBEAT.*"
    - "^MATFLO.*"
    - "^MERRET.*"
    - "^PROD.*"
    - "^prod.*"
    - "^RP.*"
    - "^SITECORE.*"
    - "^SiteCore.*"
    - "^TAGS.*"
    - "^tags.*"
    - "^test.*"
    - "^foo.*"
    - "^monitoring.*"
  profiles::gstack::graphite::allinone::graphite_web::local_settings :
    SECRET_KEY  : 'aldskfjbskjdgfha;sbdjvwpirugfbw;sJVPEIRUBVSJK.LVBpaidbflv'
    TIME_ZONE   : 'Europe/London'
    WHISPER_DIR : "/opt/data/graphite/storage/whisper/"
    DATABASES :
      default :
        NAME : '/opt/data/graphite/storage/graphite.db'
        ENGINE : 'django.db.backends.sqlite3'
        USER : ''
        PASSWORD : ''
        HOST : ''
        PORT : ''
    ALLOWED_HOSTS :
      - '*'
    CARBONLINK_HOSTS :
      - '127.0.0.1:7201:a'
      - '127.0.0.1:7201:b'
    CARBONLINK_RETRY_DELAY : 0
    CARBONLINK_TIMEOUT : 1.0
    CLUSTER_SERVERS:
      - '127.0.0.1:8888'
    POOL_WORKERS : 2
    POOL_WORKERS_PER_BACKEND : 500
    REMOTE_EXCLUDE_LOCAL : False
    REMOTE_FETCH_TIMEOUT : 10.0
    REMOTE_FIND_TIMEOUT : 10.0
    REMOTE_RENDER_CONNECT_TIMEOUT : 3.0
    REMOTE_RETRY_DELAY : 10
    RENDERING_HOSTS :
      - '127.0.0.1:8888'
    REPLICATION_FACTOR : 1
    USE_WORKER_POOL : True
    CACHES : 
      default :
        BACKEND : 'jango.core.cache.backends.memcached.MemcachedCache'
        LOCATION : '127.0.0.1:11211'
    DEFAULT_CACHE_DURATION : 60
    MEMCACHE_HOSTS :
      - '127.0.0.1:11211'
    MEMCACHE_KEY_PREFIX : 'graphite'
    MAX_TAG_LENGTH : 100
    TAGDB : 'graphite.tags.localdatabase.LocalDatabaseTagDB'
    TAGDB_CACHE_DURATION : 60
    TAGDB_AUTOCOMPLETE_LIMIT : 100
    DEBUG : False
    LOG_ROTATION : True
    LOG_ROTATION_COUNT : 3
  profiles::gstack::graphite::allinone::graphite_web::uwsgi_config:
    'uwsgi' :
      vacuum : true
      plugins : python
    'program:uwsgi' :
      uid : "%{lookup('profiles::gstack::general_settings::username')}"
      gid : "%{lookup('profiles::gstack::general_settings::username')}"
      listen : 4096
      master : true
      workers : 8
      socket : 127.0.0.1:5000
      chown-socket : "%{lookup('profiles::gstack::general_settings::username')}:%{lookup('profiles::gstack::general_settings::username')}"
      chmod-socket : 660
      vacuum : true
      plugins : python
      chdir : /opt/graphite/conf
      module : wsgi:application
      buffer-size : 65536
      threads : 2
      harakiri : 300
      http-timeout : 300
      max-requests : 5000
      log-maxsize : 104857600
      logto : /opt/data/log/uwsgi/graphite.log
  # Grafana Settings
  profiles::gstack::grafana::version : "5.1.3"
  profiles::gstack::grafana::download_url : "https://s3-us-west-2.amazonaws.com/grafana-releases/release/grafana-%{lookup('profiles::gstack::grafana::version')}.linux-x64.tar.gz"
  profiles::gstack::grafana::prime::cfg:
    server:
      http_port : 3003
  profiles::gstack::grafana::alert::cfg:
    server:
      http_port : 3004